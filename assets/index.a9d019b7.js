import{o as g,c as f,a as p,b as r,d as b,T as R,e as $,r as U,f as C,g as O,h as _,w as m,u as h,t as S,n as G,F as k,E as B,I as J,i as P,j as q}from"./vendor.1427356c.js";const W=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const u of l.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&n(u)}).observe(document,{childList:!0,subtree:!0});function s(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerpolicy&&(l.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?l.credentials="include":o.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(o){if(o.ep)return;o.ep=!0;const l=s(o);fetch(o.href,l)}};W();const K={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},Q=p("path",{d:"M4.828 21l-.02.02l-.021-.02H2.992A.993.993 0 0 1 2 20.007V3.993A1 1 0 0 1 2.992 3h18.016c.548 0 .992.445.992.993v16.014a1 1 0 0 1-.992.993H4.828zM20 15V5H4v14L14 9l6 6zm0 2.828l-6-6L6.828 19H20v-1.172zM8 11a2 2 0 1 1 0-4a2 2 0 0 1 0 4z",fill:"currentColor"},null,-1),X=[Q];function Z(t,e){return g(),f("svg",K,X)}var ee={name:"ri-image-line",render:Z};const te={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},ne=p("path",{d:"M16.172 11l-5.364-5.364l1.414-1.414L20 12l-7.778 7.778l-1.414-1.414L16.172 13H4v-2z",fill:"currentColor"},null,-1),oe=[ne];function le(t,e){return g(),f("svg",te,oe)}var se={name:"ri-arrow-right-line",render:le};const re={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",width:"1.2em",height:"1.2em",preserveAspectRatio:"xMidYMid meet",viewBox:"0 0 24 24"},ie=p("path",{d:"M21 8v12.993A1 1 0 0 1 20.007 22H3.993A.993.993 0 0 1 3 21.008V2.992C3 2.455 3.449 2 4.002 2h10.995L21 8zm-2 1h-5V4H5v16h14V9zM8 7h3v2H8V7zm0 4h8v2H8v-2zm0 4h8v2H8v-2z",fill:"currentColor"},null,-1),ae=[ie];function ue(t,e){return g(),f("svg",re,ae)}var ce={name:"ri-file-text-line",render:ue},de=(t,e)=>{for(const[s,n]of e)t[s]=n;return t};const pe={},_e=b(" \xA0 "),me=b(" \xA0 ");function he(t,e){const s=ee,n=se,o=ce;return g(),f("h2",null,[r(s),_e,r(n),me,r(o)])}var ge=de(pe,[["render",he]]);const H={PNG:/image\/png/,JPG:/image\/jpe?g/,GIF:/image\/gif/};function fe(t){for(const e in H)if(H[e].test(t))return!0;return!1}const ve=6,we=12,I="@#&$%863!i1uazvno~;*^+-. ";function ye(t){let e;if(document)e=document.createElement("canvas");else if(require("canvas")){const{createCanvas:l}=require("canvas");e=l(t.width,t.height)}else{console.warn("If you use it in Node.js without document, you need `npm install canvas`.");return}const s=e.getContext("2d"),n=t.width/t.naturalWidth;return e.width=t.width,e.height=t.height,s.scale(n,n),s.drawImage(t,0,0),s.getImageData(0,0,t.width,t.height)}function xe(t,e=I){const s=255/e.length;let n=Math.floor(t/s);return n>=e.length&&(n=e.length-1),e[n]}function Ce(t,e=I){const s=t.data,n=t.width,o=t.height,l=[];for(let u=0;u<o;u+=we){let F="";for(let v=0;v<n;v+=ve){const w=(v+n*u)*4,A=new R({r:s[w],g:s[w+1],b:s[w+2]});F+=xe(A.getBrightness(),e)}l.push(F)}return l}const Fe=b("\u8F6C\u6362"),be=p("hr",null,null,-1),Ee=p("br",null,null,-1),Ae=p("i",{class:"el-icon-upload"},null,-1),Ie=p("div",{class:"el-upload__text"},[b("\u5C06\u6587\u4EF6\u62D6\u5230\u6B64\u5904\uFF0C\u6216"),p("em",null,"\u70B9\u51FB\u4E0A\u4F20")],-1),Ve={class:"el-upload__tip"},$e=["src"],ke=$({setup(t){const e=U({size:300,char:I,scale:100}),s=C(50),n=C(new Image),o=["jpg","png","gif"],l=C(""),u=C(),F=O(()=>({width:100/(e.scale/100)+"%",transformOrigin:"left top",transform:`scale(${e.scale/100})`}));function v(){n.value&&V(n.value)}function w(){const a=ye(n.value),i=Ce(a,e.char);l.value=i.join(`
`),console.log(i),B.success("\u8F6C\u5316\u5B8C\u6210")}function A(a){a&&(D(a),u.value.clearFiles())}function M(a){return fe(a.type)?!0:(B.error(`\u76EE\u524D\u53EA\u652F\u6301 ${o.join("/")} \u683C\u5F0F\u7684\u6587\u4EF6`),!1)}function D(a){const i=new FileReader;i.readAsDataURL(a.raw),i.onload=c=>{n.value=new Image,n.value.onload=()=>{n.value&&V(n.value)},c.target&&(n.value.src=c.target.result)}}function V(a){const i=document.querySelector(".el-upload-dragger");let c=e.size;!c&&a.width&&(c=a.width);const y=a.width/c,x=a.height/y;a.width=c,a.height=x,i.style.width=c+"px",i.style.height=x+"px"}return(a,i)=>{const c=_("el-input-number"),y=_("el-form-item"),x=_("el-input"),T=_("el-button"),L=_("el-form"),Y=_("el-upload"),j=_("el-slider");return g(),f(k,null,[r(L,{inline:!0,model:h(e)},{default:m(()=>[r(y,{label:"\u56FE\u7247\u5927\u5C0F"},{default:m(()=>[r(c,{modelValue:h(e).size,"onUpdate:modelValue":i[0]||(i[0]=d=>h(e).size=d),onChange:v,min:0,step:s.value,label:"\u56FE\u7247\u5927\u5C0F"},null,8,["modelValue","step"])]),_:1}),r(y,{label:"\u8F6C\u6362\u5B57\u7B26"},{default:m(()=>[r(x,{modelValue:h(e).char,"onUpdate:modelValue":i[1]||(i[1]=d=>h(e).char=d),placeholder:"\u8F6C\u6362\u5B57\u7B26"},null,8,["modelValue"])]),_:1}),r(y,null,{default:m(()=>[r(T,{type:"primary",onClick:w},{default:m(()=>[Fe]),_:1})]),_:1})]),_:1},8,["model"]),be,Ee,r(Y,{ref:(d,N)=>{N.imageUploadRef=d,u.value=d},drag:"",action:"/",limit:1,accept:"image/*","auto-upload":!1,"on-change":A,"before-upload":M},{default:m(()=>[Ae,Ie,p("div",Ve," \u53EA\u80FD\u4E0A\u4F20 "+S(o.join("/"))+" \u6587\u4EF6\uFF0C\u4E14\u5C3D\u91CF\u4E0D\u8981\u8FC7\u5927 ",1),p("img",{class:"preview-image",src:n.value.src},null,8,$e)]),_:1},512),r(j,{modelValue:h(e).scale,"onUpdate:modelValue":i[2]||(i[2]=d=>h(e).scale=d),"show-input":""},null,8,["modelValue"]),r(x,{type:"textarea",autosize:"",placeholder:"ASCII \u753B",modelValue:l.value,"onUpdate:modelValue":i[3]||(i[3]=d=>l.value=d),style:G(h(F))},null,8,["modelValue","style"])],64)}}});const Be="char-dust",He="0.0.4",ze="convert image to ascii",Me="dist/index.js",De="dist/index.d.ts",Te=["dist"],Le={build:"yarn clean && tsc","build:demo":"cd demo && yarn && yarn build",clean:"rm -rf dist",dev:"cd demo && yarn dev",lint:"eslint . --ext .ts",prepublishOnly:"yarn build"},Ye={name:"YunYouJun",url:"https://www.yunyoujun.cn",email:"me@yunyoujun.cn"},je={url:"https://github.com/YunYouJun/char-dust/",type:"git"},Ne="MIT",Re={"@ctrl/tinycolor":"^3.4.0"},Ue={"@types/node":"^16.10.2","@typescript-eslint/eslint-plugin":"^4.32.0","@typescript-eslint/parser":"^4.32.0",eslint:"^7.32.0","lint-staged":"^11.1.2",typescript:"^4.4.3",yorkie:"^2.0.0"},Oe={"pre-commit":"lint-staged"};var E={name:Be,version:He,description:ze,main:Me,types:De,files:Te,scripts:Le,author:Ye,repository:je,license:Ne,dependencies:Re,devDependencies:Ue,gitHooks:Oe,"lint-staged":{"*.{ts}":["yarn lint","git add"]}};const Se=$({setup(t){const e={name:"Char Dust",repo:E.name,author:E.author.name,logo:"ri:character-recognition-line",link:"https://github.com/YunYouJun/char-dust",color:"black"};return C(E.repository.url),(s,n)=>{const o=_("el-header"),l=_("el-main"),u=_("el-footer");return g(),f(k,null,[r(o,null,{default:m(()=>[r(ge)]),_:1}),r(l,null,{default:m(()=>[r(ke)]),_:1}),r(u,null,{default:m(()=>[r(h(J),{copyright:e})]),_:1})],64)}}});console.log(`%c Char-Dust v${E.version} %c @YunYouJun `,"background-color:#111111;color:white;padding:5px;","padding:4px;border:1px solid black;");const z=P(Se);z.use(q);z.mount("#app");
